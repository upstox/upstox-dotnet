// <auto-generated>
/*
 * OpenAPI definition
 *
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: v0
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Text.Json;
using System.Text.Json.Serialization;
using UpstoxClient.Client;

namespace UpstoxClient.Model
{
    /// <summary>
    /// GttRule
    /// </summary>
    public partial class GttRule
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="GttRule" /> class.
        /// </summary>
        /// <param name="strategy">Defines the strategy for the GTT order leg: ENTRY - First leg order STOPLOSS - Stop-loss order TARGET - Target order</param>
        /// <param name="triggerType">Trigger type for each leg of the order</param>
        /// <param name="triggerPrice">Trigger price for the GTT order leg</param>
        /// <param name="trailingGap">Optional parameter defining the trailing gap for the GTT order</param>
        [JsonConstructor]
        public GttRule(StrategyEnum? strategy = default, TriggerTypeEnum? triggerType = default, double? triggerPrice = default, Option<double?> trailingGap = default)
        {
            Strategy = strategy;
            TriggerType = triggerType;
            TriggerPrice = triggerPrice;
            TrailingGapOption = trailingGap;
            OnCreated();
        }

        partial void OnCreated();

        /// <summary>
        /// Defines the strategy for the GTT order leg: ENTRY - First leg order STOPLOSS - Stop-loss order TARGET - Target order
        /// </summary>
        /// <value>Defines the strategy for the GTT order leg: ENTRY - First leg order STOPLOSS - Stop-loss order TARGET - Target order</value>
        public enum StrategyEnum
        {
            /// <summary>
            /// Enum ENTRY for value: ENTRY
            /// </summary>
            ENTRY = 1,

            /// <summary>
            /// Enum STOPLOSS for value: STOPLOSS
            /// </summary>
            STOPLOSS = 2,

            /// <summary>
            /// Enum TARGET for value: TARGET
            /// </summary>
            TARGET = 3
        }

        /// <summary>
        /// Returns a <see cref="StrategyEnum"/>
        /// </summary>
        /// <param name="value"></param>
        /// <returns></returns>
        /// <exception cref="NotImplementedException"></exception>
        public static StrategyEnum StrategyEnumFromString(string value)
        {
            if (value.Equals("ENTRY"))
                return StrategyEnum.ENTRY;

            if (value.Equals("STOPLOSS"))
                return StrategyEnum.STOPLOSS;

            if (value.Equals("TARGET"))
                return StrategyEnum.TARGET;

            throw new NotImplementedException($"Could not convert value to type StrategyEnum: '{value}'");
        }

        /// <summary>
        /// Returns a <see cref="StrategyEnum"/>
        /// </summary>
        /// <param name="value"></param>
        /// <returns></returns>
        public static StrategyEnum? StrategyEnumFromStringOrDefault(string value)
        {
            if (value.Equals("ENTRY"))
                return StrategyEnum.ENTRY;

            if (value.Equals("STOPLOSS"))
                return StrategyEnum.STOPLOSS;

            if (value.Equals("TARGET"))
                return StrategyEnum.TARGET;

            return null;
        }

        /// <summary>
        /// Converts the <see cref="StrategyEnum"/> to the json value
        /// </summary>
        /// <param name="value"></param>
        /// <returns></returns>
        /// <exception cref="NotImplementedException"></exception>
        public static string? StrategyEnumToJsonValue(StrategyEnum? value)
        {
            if (value == null)
                return null;

            if (value == StrategyEnum.ENTRY)
                return "ENTRY";

            if (value == StrategyEnum.STOPLOSS)
                return "STOPLOSS";

            if (value == StrategyEnum.TARGET)
                return "TARGET";

            throw new NotImplementedException($"Value could not be handled: '{value}'");
        }

        /// <summary>
        /// Defines the strategy for the GTT order leg: ENTRY - First leg order STOPLOSS - Stop-loss order TARGET - Target order
        /// </summary>
        /// <value>Defines the strategy for the GTT order leg: ENTRY - First leg order STOPLOSS - Stop-loss order TARGET - Target order</value>
        /* <example>ENTRY</example> */
        [JsonPropertyName("strategy")]
        public StrategyEnum? Strategy { get; set; }

        /// <summary>
        /// Trigger type for each leg of the order
        /// </summary>
        /// <value>Trigger type for each leg of the order</value>
        public enum TriggerTypeEnum
        {
            /// <summary>
            /// Enum ABOVE for value: ABOVE
            /// </summary>
            ABOVE = 1,

            /// <summary>
            /// Enum BELOW for value: BELOW
            /// </summary>
            BELOW = 2,

            /// <summary>
            /// Enum IMMEDIATE for value: IMMEDIATE
            /// </summary>
            IMMEDIATE = 3
        }

        /// <summary>
        /// Returns a <see cref="TriggerTypeEnum"/>
        /// </summary>
        /// <param name="value"></param>
        /// <returns></returns>
        /// <exception cref="NotImplementedException"></exception>
        public static TriggerTypeEnum TriggerTypeEnumFromString(string value)
        {
            if (value.Equals("ABOVE"))
                return TriggerTypeEnum.ABOVE;

            if (value.Equals("BELOW"))
                return TriggerTypeEnum.BELOW;

            if (value.Equals("IMMEDIATE"))
                return TriggerTypeEnum.IMMEDIATE;

            throw new NotImplementedException($"Could not convert value to type TriggerTypeEnum: '{value}'");
        }

        /// <summary>
        /// Returns a <see cref="TriggerTypeEnum"/>
        /// </summary>
        /// <param name="value"></param>
        /// <returns></returns>
        public static TriggerTypeEnum? TriggerTypeEnumFromStringOrDefault(string value)
        {
            if (value.Equals("ABOVE"))
                return TriggerTypeEnum.ABOVE;

            if (value.Equals("BELOW"))
                return TriggerTypeEnum.BELOW;

            if (value.Equals("IMMEDIATE"))
                return TriggerTypeEnum.IMMEDIATE;

            return null;
        }

        /// <summary>
        /// Converts the <see cref="TriggerTypeEnum"/> to the json value
        /// </summary>
        /// <param name="value"></param>
        /// <returns></returns>
        /// <exception cref="NotImplementedException"></exception>
        public static string? TriggerTypeEnumToJsonValue(TriggerTypeEnum? value)
        {
            if (value == null)
                return null;

            if (value == TriggerTypeEnum.ABOVE)
                return "ABOVE";

            if (value == TriggerTypeEnum.BELOW)
                return "BELOW";

            if (value == TriggerTypeEnum.IMMEDIATE)
                return "IMMEDIATE";

            throw new NotImplementedException($"Value could not be handled: '{value}'");
        }

        /// <summary>
        /// Trigger type for each leg of the order
        /// </summary>
        /// <value>Trigger type for each leg of the order</value>
        /* <example>ABOVE</example> */
        [JsonPropertyName("trigger_type")]
        public TriggerTypeEnum? TriggerType { get; set; }

        /// <summary>
        /// Trigger price for the GTT order leg
        /// </summary>
        /// <value>Trigger price for the GTT order leg</value>
        /* <example>1500.5</example> */
        [JsonPropertyName("trigger_price")]
        public double? TriggerPrice { get; set; }

        /// <summary>
        /// Used to track the state of TrailingGap
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<double?> TrailingGapOption { get; private set; }

        /// <summary>
        /// Optional parameter defining the trailing gap for the GTT order
        /// </summary>
        /// <value>Optional parameter defining the trailing gap for the GTT order</value>
        /* <example>0.5</example> */
        [JsonPropertyName("trailing_gap")]
        public double? TrailingGap { get { return this.TrailingGapOption; } set { this.TrailingGapOption = new(value); } }

        /// <summary>
        /// Gets or Sets additional properties
        /// </summary>
        [JsonExtensionData]
        public Dictionary<string, JsonElement> AdditionalProperties { get; } = new Dictionary<string, JsonElement>();

        /// <summary>
        /// Returns the string presentation of the object
        /// </summary>
        /// <returns>String presentation of the object</returns>
        public override string ToString()
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("class GttRule {\n");
            sb.Append("  Strategy: ").Append(Strategy).Append("\n");
            sb.Append("  TriggerType: ").Append(TriggerType).Append("\n");
            sb.Append("  TriggerPrice: ").Append(TriggerPrice).Append("\n");
            sb.Append("  TrailingGap: ").Append(TrailingGap).Append("\n");
            sb.Append("  AdditionalProperties: ").Append(AdditionalProperties).Append("\n");
            sb.Append("}\n");
            return sb.ToString();
        }
    }

    /// <summary>
    /// A Json converter for type <see cref="GttRule" />
    /// </summary>
    public class GttRuleJsonConverter : JsonConverter<GttRule>
    {
        /// <summary>
        /// Deserializes json to <see cref="GttRule" />
        /// </summary>
        /// <param name="utf8JsonReader"></param>
        /// <param name="typeToConvert"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <returns></returns>
        /// <exception cref="JsonException"></exception>
        public override GttRule Read(ref Utf8JsonReader utf8JsonReader, Type typeToConvert, JsonSerializerOptions jsonSerializerOptions)
        {
            int currentDepth = utf8JsonReader.CurrentDepth;

            if (utf8JsonReader.TokenType != JsonTokenType.StartObject && utf8JsonReader.TokenType != JsonTokenType.StartArray)
                throw new JsonException();

            JsonTokenType startingTokenType = utf8JsonReader.TokenType;

            Option<GttRule.StrategyEnum?> strategy = default;
            Option<GttRule.TriggerTypeEnum?> triggerType = default;
            Option<double?> triggerPrice = default;
            Option<double?> trailingGap = default;

            while (utf8JsonReader.Read())
            {
                if (startingTokenType == JsonTokenType.StartObject && utf8JsonReader.TokenType == JsonTokenType.EndObject && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (startingTokenType == JsonTokenType.StartArray && utf8JsonReader.TokenType == JsonTokenType.EndArray && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (utf8JsonReader.TokenType == JsonTokenType.PropertyName && currentDepth == utf8JsonReader.CurrentDepth - 1)
                {
                    string? localVarJsonPropertyName = utf8JsonReader.GetString();
                    utf8JsonReader.Read();

                    switch (localVarJsonPropertyName)
                    {
                        case "strategy":
                            string? strategyRawValue = utf8JsonReader.GetString();
                            if (strategyRawValue != null)
                                strategy = new Option<GttRule.StrategyEnum?>(GttRule.StrategyEnumFromStringOrDefault(strategyRawValue));
                            break;
                        case "trigger_type":
                            string? triggerTypeRawValue = utf8JsonReader.GetString();
                            if (triggerTypeRawValue != null)
                                triggerType = new Option<GttRule.TriggerTypeEnum?>(GttRule.TriggerTypeEnumFromStringOrDefault(triggerTypeRawValue));
                            break;
                        case "trigger_price":
                            triggerPrice = new Option<double?>(utf8JsonReader.TokenType == JsonTokenType.Null ? (double?)null : utf8JsonReader.GetDouble());
                            break;
                        case "trailing_gap":
                            trailingGap = new Option<double?>(utf8JsonReader.TokenType == JsonTokenType.Null ? (double?)null : utf8JsonReader.GetDouble());
                            break;
                        default:
                            break;
                    }
                }
            }

            if (!strategy.IsSet)
                throw new ArgumentException("Property is required for class GttRule.", nameof(strategy));

            if (!triggerType.IsSet)
                throw new ArgumentException("Property is required for class GttRule.", nameof(triggerType));

            if (!triggerPrice.IsSet)
                throw new ArgumentException("Property is required for class GttRule.", nameof(triggerPrice));

            return new GttRule(strategy.Value!, triggerType.Value!, triggerPrice.Value!, trailingGap);
        }

        /// <summary>
        /// Serializes a <see cref="GttRule" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="gttRule"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public override void Write(Utf8JsonWriter writer, GttRule gttRule, JsonSerializerOptions jsonSerializerOptions)
        {
            writer.WriteStartObject();

            WriteProperties(writer, gttRule, jsonSerializerOptions);
            writer.WriteEndObject();
        }

        /// <summary>
        /// Serializes the properties of <see cref="GttRule" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="gttRule"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public void WriteProperties(Utf8JsonWriter writer, GttRule gttRule, JsonSerializerOptions jsonSerializerOptions)
        {
            var strategyRawValue = GttRule.StrategyEnumToJsonValue(gttRule.Strategy!.Value);
            if (strategyRawValue != null)
                writer.WriteString("strategy", strategyRawValue);
            else
                writer.WriteNull("strategy");

            var triggerTypeRawValue = GttRule.TriggerTypeEnumToJsonValue(gttRule.TriggerType!.Value);
            if (triggerTypeRawValue != null)
                writer.WriteString("trigger_type", triggerTypeRawValue);
            else
                writer.WriteNull("trigger_type");

            if (gttRule.TriggerPrice != null)
                writer.WriteNumber("trigger_price", gttRule.TriggerPrice.Value);
            else
                writer.WriteNull("trigger_price");

            if (gttRule.TrailingGapOption.IsSet)
                if (gttRule.TrailingGapOption.Value != null)
                    writer.WriteNumber("trailing_gap", gttRule.TrailingGapOption.Value!.Value);
                else
                    writer.WriteNull("trailing_gap");
        }
    }
}
